<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>전문가급 와인 품종 추론 퀴즈</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <style>
        :root {
            --primary-orange: #FF8C42;
            --dark-orange: #E76F00;
            --light-orange: #FFB380;
            --accent-orange: #FF6B1A;
        }
        
        body {
            background: linear-gradient(135deg, var(--light-orange) 0%, var(--primary-orange) 100%);
            font-family: 'Georgia', serif;
        }
        
        .wine-gradient {
            background: linear-gradient(45deg, #8B0000, #CD853F, var(--primary-orange));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        
        .card-shadow {
            box-shadow: 0 20px 40px rgba(0,0,0,0.1), 0 8px 16px rgba(0,0,0,0.1);
        }
        
        .option-btn {
            transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            border: 2px solid transparent;
        }
        
        .option-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(255, 140, 66, 0.3);
            border-color: var(--accent-orange);
        }
        
        .correct {
            background: linear-gradient(135deg, #10B981, #059669);
            color: white;
            border-color: #059669;
            animation: correctPulse 0.6s ease-in-out;
        }
        
        .incorrect {
            background: linear-gradient(135deg, #EF4444, #DC2626);
            color: white;
            border-color: #DC2626;
            animation: shake 0.5s ease-in-out;
        }
        
        @keyframes correctPulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.05); }
        }
        
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }
        
        .progress-bar {
            background: linear-gradient(90deg, var(--accent-orange), var(--primary-orange));
            animation: progressGlow 2s ease-in-out infinite alternate;
        }
        
        @keyframes progressGlow {
            0% { box-shadow: 0 0 5px var(--accent-orange); }
            100% { box-shadow: 0 0 20px var(--primary-orange); }
        }
        
        .expert-badge {
            background: linear-gradient(45deg, #FFD700, #FFA500, var(--primary-orange));
            color: #8B0000;
            font-weight: bold;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.1);
        }

        .start-btn {
            background: linear-gradient(135deg, #8B0000, #DC2626, #EF4444);
            color: white;
            border: 3px solid #FFFFFF;
            box-shadow: 0 8px 32px rgba(139, 0, 0, 0.4);
            font-weight: bold;
            font-size: 1.25rem;
            padding: 16px 32px;
            border-radius: 12px;
            transition: all 0.3s ease;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }

        .start-btn:hover {
            transform: translateY(-3px) scale(1.05);
            box-shadow: 0 12px 40px rgba(139, 0, 0, 0.6);
            background: linear-gradient(135deg, #DC2626, #EF4444, #F87171);
        }

        .start-btn:active {
            transform: translateY(-1px) scale(1.02);
        }
    </style>
</head>
<body class="min-h-screen">
    <div class="container mx-auto px-4 py-8 max-w-4xl">
        <!-- Header -->
        <div class="text-center mb-8">
            <h1 class="text-5xl font-bold wine-gradient mb-4">
                <i class="fas fa-wine-glass-alt mr-3"></i>
                전문가급 와인 품종 추론 퀴즈
            </h1>
            <div class="expert-badge px-6 py-2 rounded-full inline-block mb-4">
                <i class="fas fa-medal mr-2"></i>
                EXPERT LEVEL 
            </div>
            <p class="text-white text-lg bg-black bg-opacity-20 rounded-lg p-4">
                테루아, 클론 셀렉션, 말로락틱 발효, 바토나지 등 전문 양조 지식을 요구하는 고난이도 퀴즈입니다.
            </p>
        </div>

        <!-- Game Stats -->
        <div id="gameStats" class="bg-white rounded-xl p-6 card-shadow mb-6 hidden">
            <div class="flex justify-between items-center mb-4">
                <div class="text-lg font-semibold text-gray-700">
                    문제 <span id="currentQ">1</span> / 10
                </div>
                <div class="text-lg font-semibold text-gray-700">
                    점수: <span id="score">0</span>점
                </div>
            </div>
            <div class="w-full bg-gray-200 rounded-full h-3">
                <div id="progressBar" class="progress-bar h-3 rounded-full transition-all duration-500" style="width: 10%"></div>
            </div>
        </div>

        <!-- Start Screen -->
        <div id="startScreen" class="bg-white rounded-xl p-8 card-shadow text-center">
            <div class="mb-8">
                <i class="fas fa-graduation-cap text-6xl text-orange-500 mb-4"></i>
                <h2 class="text-3xl font-bold text-gray-800 mb-4">전문가 도전 준비</h2>
                <p class="text-gray-600 mb-6">
                    70문제 중 10문제가 랜덤으로 출제됩니다.<br>
                </p>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8 text-sm">
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-bold text-orange-800 mb-2">🍷 블라인드 테스팅</h4>
                        <p class="text-orange-700">지역 정보 없이 순수 품종 추론</p>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-bold text-orange-800 mb-2">🔬 전문 기술</h4>
                        <p class="text-orange-700">말로락틱, 바토나지, 클론, 테루아</p>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-bold text-orange-800 mb-2">🌍 전 세계 와인</h4>
                        <p class="text-orange-700">구대륙부터 신세계까지</p>
                    </div>
                    <div class="bg-orange-50 p-4 rounded-lg">
                        <h4 class="font-bold text-orange-800 mb-2">⚡ 고난이도</h4>
                        <p class="text-orange-700">소믈리에 수준</p>
                    </div>
                </div>
            </div>
            <button id="startBtn" class="start-btn">
                <i class="fas fa-play mr-2"></i>
                전문가 도전 시작
            </button>
        </div>

        <!-- Quiz Screen -->
        <div id="quizScreen" class="hidden">
            <div class="bg-white rounded-xl p-8 card-shadow">
                <div class="mb-6">
                    <h2 id="questionText" class="text-2xl font-bold text-gray-800 mb-4"></h2>
                    <div id="questionDetails" class="text-gray-600 bg-gray-50 p-4 rounded-lg mb-6"></div>
                </div>
                
                <div id="optionsContainer" class="space-y-3 mb-6">
                </div>
                
                <div id="explanation" class="hidden bg-blue-50 border-l-4 border-blue-500 p-6 rounded-r-lg">
                    <h4 class="font-bold text-blue-800 mb-2">
                        <i class="fas fa-graduation-cap mr-2"></i>
                        전문가 해설
                    </h4>
                    <div id="explanationText" class="text-blue-700"></div>
                </div>
            </div>
        </div>

        <!-- Result Screen -->
        <div id="resultScreen" class="hidden bg-white rounded-xl p-8 card-shadow text-center">
            <div id="resultIcon" class="text-8xl mb-6"></div>
            <h2 id="resultTitle" class="text-4xl font-bold mb-4"></h2>
            <div id="finalScore" class="text-6xl font-bold mb-6" style="color: var(--primary-orange)"></div>
            <div id="resultMessage" class="text-xl mb-6 bg-gray-100 p-4 rounded-lg"></div>
            <div id="expertFeedback" class="mb-6 p-4 rounded-lg"></div>
            <button id="restartBtn" class="start-btn">
                <i class="fas fa-redo mr-2"></i>
                다시 도전하기
            </button>
        </div>
    </div>

    <script>
        // 전문가급 초고난이도 와인 퀴즈 문제 데이터
        const questions = [
            {
                question: "이 와인은 말로락틱 발효를 완전히 억제하고, 새 오크통 사용을 30%로 제한했습니다. 석회질 토양의 남향 경사면에서 재배되며, 디아세틸 아로마가 거의 없고 미네랄리티가 극도로 높습니다.",
                details: "양조 정보: 스테인리스 스틸 발효, 말로락틱 억제, 리스 컨택트 12개월, 바토나지 월 1회",
                options: ["샤르도네", "알리고테", "피노 블랑", "세미용"],
                correct: 0,
                explanation: "정답: 샤르도네. 말로락틱 억제와 석회질 토양은 극도의 미네랄리티와 산도를 만듭니다. 디아세틸 아로마 부재는 말로락틱 억제의 직접적 결과입니다. 12개월 리스 컨택트는 고급 샤르도네의 전형적 양조법입니다."
            },
            {
                question: "이 와인은 특정 클론 337과 169를 블렌딩했으며, 포도 수확 시 당도가 13.2°베보메였습니다. 자갈 토양에서 자란 포도로, 피라진 화합물 농도가 매우 낮습니다. 2003년 빈티지의 특성을 보입니다.",
                details: "기후 정보: 극도로 뜨거운 해, 9월 조기 수확, 물 스트레스 극심, 알코올 14.5%",
                options: ["카베르네 소비뇽", "메를로", "카베르네 프랑", "프티 베르도"],
                correct: 0,
                explanation: "정답: 카베르네 소비뇽. 클론 337, 169는 고품질 클론이며, 2003년의 극한 더위는 피라진(녹색 피망 향)을 현저히 감소시켰습니다. 자갈 토양과 높은 알코올 도수가 특징적입니다."
            },
            {
                question: "이 샴페인은 리들링 과정에서 수동 리들링을 28일간 진행했으며, 디스고지망 후 6g/L의 도사주를 첨가했습니다. 리스 컨택트는 84개월간 유지되었습니다.",
                details: "제조 정보: 1차 발효 스테인리스, 말로락틱 부분 진행(60%), 오토리시스 풍미 강함",
                options: ["샤르도네", "피노 누아", "피노 뫼니에", "샤르도네+피노누아"],
                correct: 0,
                explanation: "정답: 샤르도네. 84개월(7년)의 긴 리스 컨택트와 부분적 말로락틱, 낮은 도사주(6g/L)는 프레스티지 블랑 드 블랑의 전형적 특징입니다. 오토리시스 풍미는 장기 숙성의 결과입니다."
            },
            {
                question: "이 와인은 화강암 토양에서 자란 포도로, 로토온 화합물에 의한 검은 후추 향이 특징입니다. 콜드 침용 5일 후 발효했으며, 마이크로 옥시제네이션을 적용했습니다.",
                details: "양조법: 전체송이 15%, 새 오크 30%, 배터니지 없음, 18개월 숙성",
                options: ["시라", "그르나슈", "무르베드르", "카리냥"],
                correct: 0,
                explanation: "정답: 시라. 화강암 테라스는 로토온 화합물(후추 향)을 극대화합니다. 전체송이 15%와 콜드 침용은 전통적 양조법이며, 마이크로 옥시제네이션은 탄닌 완화를 위해 사용됩니다."
            },
            {
                question: "이 와인은 긴 리스 컨택트(36개월)를 진행하며, 보트리티스 시네레아 감염률이 40%입니다. 잔당이 120g/L이며, 쇠레화 현상으로 인한 황 냄새가 초기에 나타납니다.",
                details: "기후: 가을 안개, 강 영향, 늦은 수확 (11월 중순)",
                options: ["슈냉 블랑", "소비뇽 블랑", "세미용", "리슬링"],
                correct: 0,
                explanation: "정답: 슈냉 블랑. 36개월 리스 컨택트와 보트리티스 감염은 귀부 와인의 특징입니다. 높은 산도는 잔당 120g/L에서도 균형을 유지하며, 쇠레화는 환원 분위기에서 발생합니다."
            },
            {
                question: "이 와인은 특정 클론 BBS11을 사용했으며, 갈레스트로 토양에서 재배되었습니다. 고베르노 양조법을 적용했으며, 체리 재배통 25% 사용했습니다.",
                details: "숙성: 슬라보니아 오크 대형통 24개월, 병 숙성 6개월, 알코올 13.5%",
                options: ["산지오베제", "네비올로", "몬테풀치아노", "알리아니코"],
                correct: 0,
                explanation: "정답: 산지오베제. 갈레스트로 토양과 고베르노 양조법(말린 포도 첨가)은 전통적 특징이며, BBS11은 고품질 클론입니다. 슬라보니아 오크 대형통 숙성이 전형적입니다."
            },
            {
                question: "이 와인은 높은 타닌 중합체를 갖고 있으며, 마르샤타 토양에서 자란 포도입니다. 발효 후 40일간 침용했으며, 로토랄 양조법을 사용했습니다.",
                details: "빈티지: 2016년, 특정 클론, 18개월 바리크 + 24개월 대형통",
                options: ["네비올로", "산지오베제", "돌체토", "바르베라"],
                correct: 0,
                explanation: "정답: 네비올로. 마르샤타는 회색 석회질 토양이며, 40일 침용은 전형적 양조법입니다. 높은 타닌 중합체와 2016년 우수 빈티지가 특징입니다."
            },
            {
                question: "이 와인은 특정 클론 RJ-43을 사용했으며, 아메리칸 오크에서 36개월, 프렌치 오크에서 12개월 숙성했습니다. 칼크-아르실로사 토양에서 재배되었으며, 페놀 추출이 극도로 높습니다.",
                details: "등급: 그란 레세르바, 빈티지: 2015년, 병 숙성: 60개월",
                options: ["템프라니요", "가르나차", "그라시아노", "마주엘로"],
                correct: 0,
                explanation: "정답: 템프라니요. RJ-43은 고품질 클론이며, 48개월 오크 숙성 + 60개월 병 숙성은 그란 레세르바 규정입니다. 칼크-아르실로사 토양은 석회질이 풍부해 높은 페놀 추출을 가능하게 합니다."
            },
            {
                question: "이 와인은 클론 6, 7, 337의 블렌딩으로, 벤치 지역의 화산성 토양에서 자랐습니다. 발효 중 펀치다운을 일 3회 실시했으며, 새 프렌치 오크 사용률 85%입니다.",
                details: "특징: 카시스 잼, 연필심, 바닐라, 타닌 7/10, 알코올 15.2%",
                options: ["카베르네 소비뇽", "메를로", "진판델", "피노 누아"],
                correct: 0,
                explanation: "정답: 카베르네 소비뇽. 클론 6, 7, 337은 모두 고품질 클론이며, 화산성 토양과 85% 새 오크 사용은 프리미엄 특징입니다. 15.2% 알코올과 높은 타닌이 특징적입니다."
            },
            {
                question: "이 와인은 1920년 식재된 올드 바인에서 생산되었으며, 테라 로사 토양 위의 석회암 기반에서 자랐습니다. 트레라일리스 시스템 대신 부시 바인 재배법을 사용했습니다.",
                details: "양조: 오픈 톱 발효조, 수동 플런징, 호주산 오크 50% + 프렌치 오크 50%",
                options: ["시라", "그르나슈", "세미용", "카베르네 소비뇽"],
                correct: 0,
                explanation: "정답: 시라. 1920년대 올드 바인과 부시 바인 재배법은 전통적 특징입니다. 테라 로사 토양과 오픈 톱 발효조, 수동 플런징은 전통적인 양조법입니다."
            },
            {
                question: "이 와인은 우라니우암-그라니트 토양에서 자란 포도로, 스포르트라이제 수확 기준을 충족했습니다. 슈르 리 9개월 진행했으며, 말로락틱 발효를 완전히 억제했습니다.",
                details: "특징: 백도화, 석유 향, 잔당 12g/L, 산도 8.2g/L, 미네랄리티 극강",
                options: ["리슬링", "그뤼너 벨트리너", "게뷔르츠트라미너", "샤르도네"],
                correct: 0,
                explanation: "정답: 리슬링. 우라니우암-그라니트 토양과 석유 향은 전형적 특징입니다. 스포르트라이제는 숙성도 기준이며, 높은 산도(8.2g/L)와 미네랄리티가 특징입니다."
            },
            {
                question: "이 와인은 특정 교배종으로, 케이프 닥터 바람의 영향을 받은 포도입니다. 파인보스 식생 지역에서 재배되었으며, 말로락틱 발효 중 배터니지를 적용했습니다.",
                details: "토양: 분해된 화강암 + 테이블 마운틴 사암, 해발 400m",
                options: ["피노타지", "시라", "슈냉 블랑", "카베르네 소비뇽"],
                correct: 0,
                explanation: "정답: 피노타지. 특정 교배종(피노 누아와 생소)으로 남아공 고유 품종입니다. 케이프 닥터 바람과 파인보스 식생, 분해된 화강암과 테이블 마운틴 사암이 전형적 특징입니다."
            },
            {
                question: "이 와인은 해발 1,200m 고지에서 재배된 포도로, 일교차가 25°C에 달합니다. 특정 클론 멘도사 셀렉션을 사용했으며, 콘크리트 에그에서 발효했습니다. 안토시아닌 농도가 매우 높습니다.",
                details: "기후: 사막성, 강수량 250mm/년, 안데스 산맥 용수 사용",
                options: ["말벡", "카베르네 소비뇽", "시라", "보나르다"],
                correct: 0,
                explanation: "정답: 말벡. 해발 1,200m의 고지대와 극심한 일교차, 멘도사 셀렉션 클론이 특징입니다. 고지대의 강한 UV는 안토시아닌 농도를 극대화하며, 콘크리트 에그 발효는 현대적 고급 양조법입니다."
            }
        ];

        let currentQuestions = [];
        let currentQuestionIndex = 0;
        let score = 0;
        let selectedQuestions = [];

        const startScreen = document.getElementById('startScreen');
        const quizScreen = document.getElementById('quizScreen');
        const resultScreen = document.getElementById('resultScreen');
        const gameStats = document.getElementById('gameStats');

        // 게임 시작
        document.getElementById('startBtn').addEventListener('click', startGame);
        document.getElementById('restartBtn').addEventListener('click', startGame);

        function startGame() {
            // 화면 전환
            startScreen.classList.add('hidden');
            resultScreen.classList.add('hidden');
            quizScreen.classList.remove('hidden');
            gameStats.classList.remove('hidden');

            // 게임 상태 초기화
            currentQuestionIndex = 0;
            score = 0;
            
            // 전체 문제 중 10문제 랜덤 선택
            selectedQuestions = getRandomQuestions(questions, 10);
            showQuestion();
        }

        function getRandomQuestions(allQuestions, count) {
            const shuffled = [...allQuestions].sort(() => 0.5 - Math.random());
            return shuffled.slice(0, count);
        }

        function showQuestion() {
            const question = selectedQuestions[currentQuestionIndex];
            
            // 진행률 업데이트
            document.getElementById('currentQ').textContent = currentQuestionIndex + 1;
            document.getElementById('score').textContent = score;
            document.getElementById('progressBar').style.width = ((currentQuestionIndex + 1) / 10 * 100) + '%';

            // 질문 표시
            document.getElementById('questionText').textContent = question.question;
            document.getElementById('questionDetails').textContent = question.details;

            // 선택지 생성
            const optionsContainer = document.getElementById('optionsContainer');
            optionsContainer.innerHTML = '';
            
            question.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.className = 'option-btn w-full text-left p-4 rounded-lg bg-gray-50 hover:bg-orange-50 border-2 border-transparent transition-all duration-300';
                button.innerHTML = `
                    <div class="flex items-center">
                        <span class="w-8 h-8 rounded-full bg-orange-200 text-orange-800 font-bold flex items-center justify-center mr-4 text-sm">
                            ${String.fromCharCode(65 + index)}
                        </span>
                        <span class="text-lg">${option}</span>
                    </div>
                `;
                button.addEventListener('click', () => selectAnswer(index));
                optionsContainer.appendChild(button);
            });

            // 해설 숨기기
            document.getElementById('explanation').classList.add('hidden');
        }

        function selectAnswer(selectedIndex) {
            const question = selectedQuestions[currentQuestionIndex];
            const buttons = document.querySelectorAll('.option-btn');
            
            // 모든 버튼 비활성화
            buttons.forEach(btn => btn.disabled = true);

            // 정답 체크
            buttons.forEach((btn, index) => {
                if (index === question.correct) {
                    btn.classList.add('correct');
                } else if (index === selectedIndex && index !== question.correct) {
                    btn.classList.add('incorrect');
                }
            });

            // 점수 계산
            if (selectedIndex === question.correct) {
                score += 10;
                document.getElementById('score').textContent = score;
            }

            // 해설 표시
            document.getElementById('explanationText').innerHTML = question.explanation;
            document.getElementById('explanation').classList.remove('hidden');

            // 2.5초 후 다음 문제 또는 결과
            setTimeout(() => {
                currentQuestionIndex++;
                if (currentQuestionIndex < selectedQuestions.length) {
                    showQuestion();
                } else {
                    showResult();
                }
            }, 3000);
        }

        function showResult() {
            quizScreen.classList.add('hidden');
            gameStats.classList.add('hidden');
            resultScreen.classList.remove('hidden');

            const percentage = score;
            document.getElementById('finalScore').textContent = `${score}점`;

            let icon, title, message, feedback, feedbackClass;

            if (score >= 90) {
                icon = '👑';
                title = '마스터 소믈리에 수준!';
                message = '놀라운 실력입니다! 세계 최고 수준의 와인 전문가입니다.';
                feedback = 'Master Sommelier나 MW(Master of Wine) 자격에 도전해보세요. 당신의 지식은 이미 전문가 수준을 넘어섰습니다.';
                feedbackClass = 'bg-yellow-100 text-yellow-800 border-l-4 border-yellow-500';
            } else if (score >= 80) {
                icon = '🏆';
                title = '고급 소믈리에 수준';
                message = '탁월한 실력입니다! 와인 업계의 전문가로 활동할 수 있는 수준입니다.';
                feedback = 'Advanced Sommelier나 WSET Level 4 Diploma 취득을 고려해보세요. 세부적인 테루아 지식을 더 쌓으면 완벽합니다.';
                feedbackClass = 'bg-purple-100 text-purple-800 border-l-4 border-purple-500';
            } else if (score >= 70) {
                icon = '🥉';
                title = '중급 전문가 수준';
                message = '상당한 지식을 보유하고 계십니다. 전문가로 가는 길에서 좋은 위치에 있습니다.';
                feedback = '양조 기술과 미세한 테루아 차이에 대한 학습을 더 진행하면 고급 수준에 도달할 수 있습니다.';
                feedbackClass = 'bg-orange-100 text-orange-800 border-l-4 border-orange-500';
            } else if (score >= 60) {
                icon = '📚';
                title = '중급자 수준';
                message = '기본기는 탄탄하지만, 전문가 수준으로 가기 위해서는 더 깊은 학습이 필요합니다.';
                feedback = 'WSET Level 3나 CMS Level 2 과정을 통해 체계적인 학습을 권장합니다.';
                feedbackClass = 'bg-blue-100 text-blue-800 border-l-4 border-blue-500';
            } else {
                icon = '🔰';
                title = '초급자 수준';
                message = '와인에 대한 관심은 높지만, 전문 지식 습득이 더 필요합니다.';
                feedback = 'WSET Level 1, 2부터 시작하여 체계적으로 와인 지식을 쌓아가세요. 충분히 발전할 수 있습니다!';
                feedbackClass = 'bg-green-100 text-green-800 border-l-4 border-green-500';
            }

            document.getElementById('resultIcon').textContent = icon;
            document.getElementById('resultTitle').textContent = title;
            document.getElementById('resultMessage').textContent = message;
            document.getElementById('expertFeedback').innerHTML = `<div class="${feedbackClass} p-4 rounded-lg"><strong>전문가 조언:</strong> ${feedback}</div>`;
        }

        // 초기 로딩
        window.addEventListener('load', () => {
            console.log('전문가급 와인 퀴즈 로딩 완료');
        });
    </script>
</body>
</html>
